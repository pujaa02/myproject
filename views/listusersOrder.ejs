<%-include ('adminSidebar',{search : 2}) %>
  <div class="table1">
    <h2 class="text-center mt-2">List Users</h2>
    <table class="table text-center table-bordered w-auto">
      <thead>
        <tr>
          <th scope="col" id="table1" onclick="userOrder('user_id',1)">Id</th>
          <th scope="col" id="table2" onclick="userOrder('u_fname',2)">First Name</th>
          <th scope="col" id="table3" onclick="userOrder('u_lname',3)">Last Name</th>
          <th scope="col" id="table4" onclick="userOrder('u_email',4)">EmailId</th>
          <th scope="col" id="table5" onclick="userOrder('u_contact',5)">Contact</th>
          <th scope="col" id="table6" onclick="userOrder('u_address',6)">Address</th>
          <th scope="col" id="table7" onclick="userOrder('u_gender',7)">Gender</th>
          <th scope="col" id="table8" onclick="userOrder('u_dob',8)">Date of Birth</th>
          <th scope="col">Edit</th>
          <th scope="col">Delete</th>
        </tr>
      </thead>
      <tbody>
        <% for(let i=0 ; i<users.length ; i++) {%>
          <tr>
            <th scope="row">
              <%= users[i].user_id %>
            </th>
            <td>
              <%= users[i].u_fname %>
            </td>
            <td>
              <%= users[i].u_lname %>
            </td>
            <td>
              <%= users[i].u_email %>
            </td>
            <td>
              <%= users[i].u_contact %>
            </td>
            <td>
              <%= users[i].u_address %>
            </td>
            <td>
              <%= users[i].u_gender %>
            </td>
            <td>
              <%= users[i].u_dob %>
            </td>
            <td><a href="/admin/editUser/<%=users[i].user_id %>"><input type="button" value=" Edit " class="btn btn-primary"></a></td>
            <td><a href="/admin/deleteUser/<%=users[i].user_id %>"><input type="button" value="Delete" class="btn btn-danger"></a></td>
          </tr>
          <% } ; %>
      </tbody>
    </table>
    <%-include ('pagination',{page,p}) %>
  </div>
  </div>
  </div>
  </body>
     <script>
       window.addEventListener('load',()=>{
       let n = window.sessionStorage.getItem('icon');
       document.getElementById(`table${n}`).style.border = '1px solid orange';
      });
       function userOrder(column,n){
        let column1 = window.sessionStorage.getItem('column');
            let icon = window.sessionStorage.getItem('icon');       
            if(column1 == `${column}1`){
                window.sessionStorage.setItem('column', `${column}0`);
                window.sessionStorage.setItem('icon',n);
                document.getElementById(`table${n}`).style.border = '1px solid orange';
                window.location.href = `/admin/getallusers/${column}/asc`;
            }
        else{
               window.sessionStorage.setItem('column', `${column}1`);
               window.sessionStorage.setItem('icon',n);
               document.getElementById(`table${n}`).style.border = '1px solid orange';
               window.location.href = `/admin/getallusers/${column}/desc`;
            }
        }
     </script>
  </html>